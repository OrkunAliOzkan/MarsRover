<!DOCTYPE html>
<html>
    <head>
        <title>Test for Drive</title>
        <link rel="stylesheet" href="style.css">
    </head>
    <body>
        <h2>Test for Drive</h2>
        <form action="/render-test" method="post" id="form1">
            <!-- this is a comment: br tag is for line break-->
            <label for="num1">Rover X:</label><br>
            <input type="text" id="rover-x" name="num1"><br>

            <label for="num1">Rover Y:</label><br>
            <input type="text" id="rover-y" name="num1"><br>

            <p id="angle">Angle: </p><br>

            <input type="button" value="Send" id="sender"><br>
        </form>
    </body>
    <script src="/socket.io/socket.io.js"></script>
    <script>
        (() => {
            const sock = io();

            const button = document.querySelector("#sender")
            button.addEventListener('click', () => {
                const rX = Math.floor(document.querySelector("#rover-x").value);
                const rY = Math.floor(document.querySelector("#rover-y").value);
                let rA = Math.atan2(rY, rX) * 180 / Math.PI;
                rA = rA < 0 ? 180 - rA : rA;
                const output = document.querySelector("#angle").innerHTML = `Angle: ${rA}`;
                const data = {
                    rover_x: rX,
                    rover_y: rY,
                    rover_angle: rA,
                }
                sock.emit('update', data);
                console.log("clicked");
            })
            
        })();
    </script>
</html>
